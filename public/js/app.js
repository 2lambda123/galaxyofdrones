(window.webpackJsonp=window.webpackJsonp||[]).push([[0],{0:function(t,e,i){i("bUC5"),t.exports=i("pyCd")},1:function(t,e){},"9Wh1":function(t,e,i){"use strict";i.r(e);var n=i("Vjiq");window._=i("LvDl");try{window.Popper=i("8L3F").default,window.$=window.jQuery=i("EVdn"),i("SYky")}catch(t){}window.axios=i("vDqi"),window.axios.defaults.headers.common["X-Requested-With"]="XMLHttpRequest";var a=document.head.querySelector('meta[name="csrf-token"]');a?window.axios.defaults.headers.common["X-CSRF-TOKEN"]=a.content:console.error("CSRF token not found: https://laravel.com/docs/csrf#csrf-x-csrf-token"),window.io=i("gFX4"),window.Echo=new n.a({broadcaster:"socket.io",host:{path:"/ws"}}),window.Vue=i("XuX8"),window.Swal=i("PSD3"),window.moment=i("wd/R"),moment.locale(document.querySelector("html").getAttribute("lang")),i("4R65"),i("pLo+"),i("t/UT"),window.axios.interceptors.response.use(null,function(t){var e=_.get(t.response,"status");return 401===e?window.location.reload():500===e&&Swal.fire({title:Translations.error.whoops,text:Translations.error.wrong,type:"error",showConfirmButton:!1,timer:1500}),Promise.reject(t)})},bUC5:function(t,e,i){"use strict";i.r(e);var n=i("jE9Z"),a=i("XuX8"),r=i.n(a),s=new r.a,o=r.a.extend({data:function(){return{remaining:0,remainingInterval:void 0}},created:function(){s.$on("modal-hidden",this.clearRemaining)},beforeDestroy:function(){s.$off("modal-hidden",this.clearRemaining)},methods:{initRemaining:function(t){var e=this;this.clearRemaining(),this.remaining=t,this.remaining<1||(this.remainingInterval=setInterval(function(){e.remaining-=1,e.remaining||e.clearRemaining()},1e3))},clearRemaining:function(){this.remainingInterval&&(this.remainingInterval=clearInterval(this.remainingInterval))}}}),c=o.extend({data:function(){return{$modal:void 0,isEnabled:!1}},mounted:function(){var t=this;this.$modal=$(this.$el).on("show.bs.modal",function(){s.$emit("modal-show"),t.isEnabled=!0}).on("hidden.bs.modal",function(){s.$emit("modal-hidden"),t.isEnabled=!1})},watch:{$route:function(){this.close()}},methods:{openAfterHidden:function(t){s.$on("modal-hidden",function e(){t(),s.$off("modal-hidden",e)}),this.close()},close:function(){this.$modal.modal("hide")}}}),u=c.extend({props:["url","destroyUrl"],data:function(){return{page:1,data:{current_page:1,from:0,last_page:1,to:0,total:0}}},created:function(){s.$on("bookmark-click",this.open)},computed:{isEmpty:function(){return 0===this.data.total},hasPrev:function(){return this.data.current_page>1},hasNext:function(){return this.data.current_page<this.data.last_page}},methods:{open:function(){this.page=1,this.fetchData(!0)},fetchData:function(){var t=this,e=arguments.length>0&&void 0!==arguments[0]&&arguments[0];(e||this.isEnabled)&&axios.get(this.url,{params:{page:this.page}}).then(function(i){t.data=i.data,e&&t.$nextTick(function(){return t.$modal.modal()})})},move:function(t){s.$emit("starmap-move",t.x,t.y),this.close()},destroy:function(t){var e=this;axios.delete(this.destroyUrl.replace("__bookmark__",t.id)).then(function(){e.page>1&&e.data.to-e.data.from==0?e.prevPage():e.fetchData()})},prevPage:function(){this.changePage(this.page-1)},nextPage:function(){this.changePage(this.page+1)},changePage:function(t){this.page!==t&&(t<1||t>this.data.last_page||(this.page=t,this.fetchData()))}}}),d=c.extend({props:["url","storeUrl","destroyUrl"],data:function(){return{isSubscribed:!1,canDemolish:!1,energy:0,selected:{id:void 0},grid:{id:void 0,building_id:void 0},data:{remaining:0,buildings:[]}}},created:function(){var t=this;s.$on("grid-click",this.open),s.$on("energy-updated",function(e){t.energy=e}),s.$on("planet-update",function(){return t.fetchData()})},computed:{canConstruct:function(){return this.energy>=this.selected.construction_cost}},methods:{open:function(t){this.grid=t,this.fetchData(!0)},fetchData:function(){var t=this,e=arguments.length>0&&void 0!==arguments[0]&&arguments[0];(e||this.isEnabled)&&axios.get(this.url.replace("__grid__",this.grid.id)).then(function(i){t.data=i.data,e&&t.data.buildings.length?(t.initRemaining(t.data.remaining),_.find(t.data.buildings,t.selected)||t.select(_.first(t.data.buildings)),e&&t.$nextTick(function(){return t.$modal.modal()})):t.close()})},store:function(){axios.post(this.storeUrl.replace("__grid__",this.grid.id).replace("__building__",this.selected.id))},destroy:function(){axios.delete(this.destroyUrl.replace("__grid__",this.grid.id))},isSelected:function(t){return this.selected.id===t.id},select:function(t){this.selected=t}}}),h=c.extend({props:["url"],data:function(){return{grid:{}}},created:function(){s.$on("demolish-open",this.open)},methods:{open:function(t){this.grid=t,this.$modal.modal()},demolish:function(){axios.delete(this.url.replace("__grid__",this.grid.id)).then(this.close)}}}),l=i("wd/R"),p=i.n(l);function f(t,e){return function(t){if(Array.isArray(t))return t}(t)||function(t,e){var i=[],n=!0,a=!1,r=void 0;try{for(var s,o=t[Symbol.iterator]();!(n=(s=o.next()).done)&&(i.push(s.value),!e||i.length!==e);n=!0);}catch(t){a=!0,r=t}finally{try{n||null==o.return||o.return()}finally{if(a)throw r}}return i}(t,e)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance")}()}var m=function(t){return"(".concat(t,")")},g=function(t){var e=p()(t,"YYYY-MM-DD HH:mm:ss");return e.isValid()?e.fromNow():t},y=function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"resource";return"".concat(e,"-").concat(t&&_.has(t,"id")?t.id:t)},v=function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:2,i=Math.abs(t);return i>=Math.pow(10,13)?"".concat((t/Math.pow(10,12)).toFixed(e),"t"):i>=Math.pow(10,10)?"".concat((t/Math.pow(10,9)).toFixed(e),"b"):i>=Math.pow(10,7)?"".concat((t/Math.pow(10,6)).toFixed(e),"m"):i>=Math.pow(10,4)?"".concat((t/Math.pow(10,3)).toFixed(e),"k"):Math.round(t)},x=function(t){return"".concat((100*t).toFixed(0),"%")},b=function(t,e){var i=e;i||(i=t);var n=_.isNumber(t)?Math.abs(t):t;return i<0?"-".concat(n):"+".concat(n)},w=function(t){var e=Math.abs(t),i=[e/3600,e%3600/60,e%60],n=f(i=_.map(i,function(t){return _.padStart(Math.floor(t),2,"0")}),3),a=n[0],r=n[1],s=n[2];return"".concat(a,":").concat(r,":").concat(s)},k=r.a.extend({props:{isEnabled:Boolean,url:{type:String,required:!0}},data:function(){return{page:1,data:{current_page:1,last_page:1,total:0}}},computed:{isEmpty:function(){return 0===this.data.total},hasPrev:function(){return this.data.current_page>1},hasNext:function(){return this.data.current_page<this.data.last_page},dataUrl:function(){return this.url}},watch:{isEnabled:function(){this.page=1,this.fetchData()}},created:function(){var t=this;s.$on("user-updated",function(){return t.fetchData()})},methods:{fetchData:function(){var t=this;this.isEnabled&&axios.get(this.dataUrl,{params:{page:this.page}}).then(function(e){t.data=e.data})},prevPage:function(){this.changePage(this.page-1)},nextPage:function(){this.changePage(this.page+1)},changePage:function(t){this.page!==t&&(t<1||t>this.data.last_page||(this.page=t,this.fetchData()))}}}),U=k.extend({props:["openAfterHidden"],data:function(){return{collapsed:[]}},methods:{isCollapsed:function(t){return _.includes(this.collapsed,t.id)},collapse:function(t){var e=_.indexOf(this.collapsed,t.id);e>-1?this.collapsed.splice(e,1):this.collapsed.push(t.id)},openUser:function(t){this.openAfterHidden(function(){return s.$emit("profile-click",t)})}}}),T=k.extend({props:["openAfterHidden"],data:function(){return{collapsed:[]}},methods:{isCollapsed:function(t){return _.includes(this.collapsed,t.id)},collapse:function(t){var e=_.indexOf(this.collapsed,t.id);e>-1?this.collapsed.splice(e,1):this.collapsed.push(t.id)},openUser:function(t){this.openAfterHidden(function(){return s.$emit("profile-click",t)})},sendMessage:function(t){this.openAfterHidden(function(){return s.$emit("message-click",t)})}}}),S={data:function(){return{selectedTab:""}},methods:{isSelectedTab:function(t){return this.selectedTab===t},selectTab:function(t){this.selectedTab=t}}},D=c.extend({components:{BattleLog:U,CompletionLog:k,MessageLog:T},mixins:[S],data:function(){return{selectedTab:"mission-log"}},created:function(){s.$on("mailbox-click",this.open)},methods:{open:function(){var t=this;this.$nextTick(function(){return t.$modal.modal()})}}}),R=c.extend({props:["url"],data:function(){return{errors:{},form:{}}},created:function(){this.form=this.values()},computed:{method:function(){return"post"},parameters:function(){return JSON.parse(JSON.stringify(this.form))}},methods:{hasError:function(t){return _.has(this.errors,t)},values:function(){return{}},error:function(t){return _.first(this.errors[t])},submit:function(){var t=this;axios[this.method](this.url,this.parameters).then(function(){t.form=t.values(),t.errors={},t.close()}).catch(function(e){t.errors=e.response.data.errors})}}}),E=R.extend({created:function(){s.$on("message-click",this.open)},methods:{open:function(t){var e=this;this.form.recipient=t,this.$nextTick(function(){return e.$modal.modal()})},values:function(){return{recipient:"",message:""}}}}),M={props:["url"],data:function(){return{data:{incoming:0}}},created:function(){var t=this;s.$on("user-updated",function(){return t.fetchData()})},computed:{isEnabled:function(){return this.data.incoming>0}},methods:{fetchData:function(){var t=this;axios.get(this.url).then(function(e){t.data=e.data})},openRadar:function(){s.$emit("mothership-click","radar")}}},q=o.extend({props:["completion","isCompletable","store"],created:function(){this.initRemaining(this.completion.remaining)},watch:{completion:function(){this.initRemaining(this.completion.remaining)}}}),P={props:["isEnabled","url","storeUrl"],components:{Completion:q},data:function(){return{data:{units:[],expeditions:[]}}},created:function(){var t=this;s.$on("planet-update",function(){return t.fetchData()})},computed:{isEmpty:function(){return!this.data.expeditions.length}},watch:{isEnabled:function(){this.fetchData()}},methods:{fetchData:function(){var t=this;this.isEnabled&&axios.get(this.url).then(function(e){t.data=e.data})},isCompletable:function(t){var e=this;return!_.some(t.units,function(t){return t.quantity>_.find(e.data.units,{id:t.id}).quantity})},store:function(t){axios.post(this.storeUrl.replace("__expedition__",t.id))}}},C={props:["isEnabled","url","storeUrl"],components:{Completion:q},data:function(){return{data:{solarion:0,resources:[],missions:[]}}},created:function(){var t=this;s.$on("planet-update",function(){return t.fetchData()})},computed:{isEmpty:function(){return!this.data.missions.length}},watch:{isEnabled:function(){this.fetchData()}},methods:{fetchData:function(){var t=this;this.isEnabled&&axios.get(this.url).then(function(e){t.data=e.data})},isCompletable:function(t){var e=this;return!_.some(t.resources,function(t){return t.quantity>_.find(e.data.resources,{id:t.id}).quantity})},store:function(t){axios.post(this.storeUrl.replace("__mission__",t.id))}}},I={props:["isEnabled","url","storeResourceUrl","storeUnitUrl","destroyResourceUrl","destroyUnitUrl"],components:{Research:o.extend({props:["research","isResearchable","store","destroy"],data:function(){return{isResearch:!0}},created:function(){this.initRemaining(this.research.remaining)},computed:{resource:function(){return this.research},unit:function(){return this.research}},watch:{research:function(){this.initRemaining(this.research.remaining)}}})},data:function(){return{energy:0,data:{resource:void 0,units:[]}}},created:function(){var t=this;s.$on("energy-updated",function(e){t.energy=e}),s.$on("user-updated",function(){return t.fetchData()})},computed:{isEmpty:function(){return!this.data.resource&&!this.data.units.length}},watch:{isEnabled:function(){this.fetchData()}},methods:{fetchData:function(){var t=this;this.isEnabled&&axios.get(this.url).then(function(e){t.data=e.data})},isResearchable:function(t){return this.energy>=t.research_cost},storeResource:function(){axios.post(this.storeResourceUrl)},destroyResource:function(){axios.delete(this.destroyResourceUrl)},storeUnit:function(t){axios.post(this.storeUnitUrl.replace("__unit__",t.id))},destroyUnit:function(t){axios.delete(this.destroyUnitUrl.replace("__unit__",t.id))}}},A=o.extend({props:["movement","canMove","move"],created:function(){this.initRemaining(this.movement.remaining)},watch:{movement:function(){this.initRemaining(this.movement.remaining)}}}),N={methods:{isRouteName:function(t){return!_.isEmpty(this.$route)&&this.$route.name===t}}},z={props:["isEnabled","url","canMove","close"],components:{Movement:A},mixins:[N],data:function(){return{data:{incoming_movements:[]}}},created:function(){var t=this;s.$on("user-update",function(){return t.fetchData()})},computed:{isEmpty:function(){return!this.data.incoming_movements.length}},watch:{isEnabled:function(){this.fetchData()}},methods:{fetchData:function(){var t=this;this.isEnabled&&axios.get(this.url).then(function(e){t.data=e.data})},move:function(t){s.$emit("starmap-move",t.end.x,t.end.y),this.close()}}},J={props:["isEnabled","url","storeUrl","close","planets"],components:{Completion:q},mixins:[N],data:function(){return{selected:void 0,data:{can_store:!0,shields:[]}}},computed:{isEmpty:function(){return!this.data.shields.length}},watch:{isEnabled:function(){this.fetchData()},planets:function(){_.find(this.planets,{id:this.selected})||(this.selected=_.get(_.first(this.planets),"id"))}},methods:{fetchData:function(){var t=this;this.isEnabled&&axios.get(this.url).then(function(e){t.data=e.data})},store:function(){axios.post(this.storeUrl.replace("__planet__",this.selected)).then(this.fetchData)},move:function(t){s.$emit("starmap-move",t.planet.x,t.planet.y),this.close()}}},j=c.extend({props:["url","storeUrl"],components:{Armory:P,Cargo:C,Laboratory:I,Radar:z,Shield:J},mixins:[S],data:function(){return{selected:void 0,selectedTab:"cargo",data:{capital_id:void 0,capital_change_remaining:0,incoming_capital_movement_count:0,planets:[]}}},created:function(){var t=this;s.$on("mothership-click",this.open),s.$on("user-updated",function(){return t.fetchData()})},computed:{canHyperjump:function(){return!this.data.incoming_capital_movement_count&&this.selected!==this.data.capital_id}},methods:{open:function(t){t&&this.selectTab(t),this.fetchData(!0)},fetchData:function(){var t=this,e=arguments.length>0&&void 0!==arguments[0]&&arguments[0];(e||this.isEnabled)&&axios.get(this.url).then(function(i){t.data=i.data,t.selected=t.data.capital_id,t.initRemaining(t.data.capital_change_remaining),e&&t.$nextTick(function(){return t.$modal.modal()})})},store:function(){axios.put(this.storeUrl.replace("__planet__",this.selected))}}}),B={data:function(){return{isMove:!1,quantity:{}}},computed:{hasUnits:function(){var t=this,e=_.pickBy(this.quantity),i=!1;return _.forEach(this.planet.units,function(n){return!_.has(e,n.id)||(i=e[n.id]>0,i&&e[n.id]<=t.unitQuantity(n))}),i},slowestSupportUnitSpeed:function(){if(this.hasUnits){var t=_.pickBy(this.quantity);return _.get(_.minBy(_.filter(this.planet.units,function(e){return _.has(t,e.id)}),"speed"),"speed",1)}return 1}},methods:{setTotalUnit:function(t){var e=this.unitQuantity(t);e>0&&this.$set(this.quantity,t.id,e)},unitQuantity:function(t){return(this.isMove?_.get(t,"storage",0):0)+_.get(t,"quantity",0)}}},F={data:function(){return{isMove:!1,quantity:{}}},computed:{canTransport:function(){return this.hasResources&&this.transporterQuantity<=this.unitQuantity(this.transporterUnit)},hasResources:function(){var t=this,e=_.pickBy(this.quantity),i=!1;return _.forEach(this.planet.resources,function(n){return!_.has(e,n.id)||(i=e[n.id]>0,i&&e[n.id]<=t.resourceQuantity(n))}),i},transporterUnit:function(){var t=this;return _.find(this.planet.units,function(e){return e.type===t.unitTypes.transporter})},transporterQuantity:function(){if(!this.hasResources)return 0;var t=_.reduce(_.pickBy(this.quantity),function(t,e){return t+e},0);return Math.ceil(t/this.transporterUnit.capacity)}},methods:{setTotalResource:function(t){var e=this.resourceQuantity(t);e>0&&this.$set(this.quantity,t.id,e)},resourceQuantity:function(t){var e=this.isMove?_.get(t,"storage",0):0;return this.planet.resource_id===t.id?e+Math.floor(this.mined):e+_.get(t,"quantity",0)}}},H=c.extend({props:["types","unitTypes","urls"],mixins:[B,F],data:function(){return{isMove:!0,type:void 0,mined:0,selected:{id:void 0,travel_time:0},planet:{id:void 0,resource_id:void 0,resources:[],units:[]}}},created:function(){var t=this;s.$on("move-click",this.open),s.$on("planet-updated",function(e){t.planet=e}),s.$on("resource-updated",function(e){t.mined=e})},computed:{isScoutType:function(){return this.type===this.types.scout},isAttackType:function(){return this.type===this.types.attack},isOccupyType:function(){return this.type===this.types.occupy},isSupportType:function(){return this.type===this.types.support},isTransportType:function(){return this.type===this.types.transport},canScout:function(){return _.has(this.quantity,this.scoutUnit.id)&&this.quantity[this.scoutUnit.id]>0&&this.quantity[this.scoutUnit.id]<=this.unitQuantity(this.scoutUnit)},canOccupy:function(){return this.unitQuantity(this.settlerUnit)>0},hasFighterUnits:function(){var t=this,e=_.pickBy(this.quantity),i=!1;return _.forEach(this.fighterUnits,function(n){return!_.has(e,n.id)||(i=e[n.id]>0,i&&e[n.id]<=t.unitQuantity(n))}),i},scoutUnit:function(){var t=this;return _.find(this.planet.units,function(e){return e.type===t.unitTypes.scout})},settlerUnit:function(){var t=this;return _.find(this.planet.units,function(e){return e.type===t.unitTypes.settler})},fighterUnits:function(){var t=this;return _.filter(this.planet.units,function(e){return e.type===t.unitTypes.fighter||e.type===t.unitTypes.heavyFighter})},travelTime:function(){return Math.round(this.selected.travel_time/this.slowestUnitSpeed)},slowestUnitSpeed:function(){if(this.isScoutType)return this.scoutUnit.speed;if(this.isOccupyType)return this.settlerUnit.speed;if(this.isTransportType)return this.transporterUnit.speed;if(this.isSupportType)return this.slowestSupportUnitSpeed;if(this.isAttackType&&this.hasFighterUnits){var t=_.pickBy(this.quantity);return _.get(_.minBy(_.filter(this.fighterUnits,function(e){return _.has(t,e.id)}),"speed"),"speed",1)}return 1}},methods:{open:function(t,e){var i=this;this.type=t,this.selected=e,this.quantity={},this.$nextTick(function(){return i.$modal.modal()})},scout:function(){axios.post(this.urls.scout.replace("__planet__",this.selected.id),{quantity:this.quantity[this.scoutUnit.id]}).then(this.close)},attack:function(){axios.post(this.urls.attack.replace("__planet__",this.selected.id),{quantity:this.quantity}).then(this.close)},occupy:function(){axios.post(this.urls.occupy.replace("__planet__",this.selected.id)).then(this.close)},support:function(){axios.post(this.urls.support.replace("__planet__",this.selected.id),{quantity:this.quantity}).then(this.close)},transport:function(){axios.post(this.urls.transport.replace("__planet__",this.selected.id),{quantity:this.quantity}).then(this.close)}}}),O={methods:{prev:function(){s.$emit("prev-planet")},next:function(){s.$emit("next-planet")},upgradeAll:function(){s.$emit("upgrade-all-open")}}},V=c.extend({props:["url"],data:function(){return{geoJsonPoint:{properties:{status:""},geometry:{coordinates:[]}},planet:{id:void 0},data:{username:""}}},created:function(){var t=this;s.$on("planet-click",this.open),s.$on("planet-updated",function(e){t.planet=e})},computed:{isCurrent:function(){return this.properties.id===this.planet.id},isFriendly:function(){return"friendly"===this.properties.status},properties:function(){return this.geoJsonPoint.properties},geometry:function(){return this.geoJsonPoint.geometry}},methods:{open:function(t){this.geoJsonPoint=t,this.fetchData()},fetchData:function(){var t=this;axios.get(this.url.replace("__planet__",this.properties.id)).then(function(e){t.data=e.data,t.$nextTick(function(){return t.$modal.modal()})})},openUser:function(){var t=this;this.openAfterHidden(function(){return s.$emit("profile-click",t.data.username)})},changePlanet:function(){s.$emit("change-planet",this.properties.id)},openMove:function(t){var e=this;this.openAfterHidden(function(){return s.$emit("move-click",t,_.assignIn({},e.properties,e.data))})}}}),Q={props:["url"],data:function(){return{isSubscribed:!1,energy:0,energyInterval:void 0,data:{id:void 0,username:"",production_rate:0,experience:0,level:1,level_experience:0,next_level_experience:0,notification_count:0}}},created:function(){this.fetchData()},computed:{hasUnread:function(){return this.data.notification_count>0},experienceLabel:function(){return"".concat(this.data.experience," / ").concat(this.data.next_level_experience)},experienceProgress:function(){return"".concat((this.data.experience-this.data.level_experience)/(this.data.next_level_experience-this.data.level_experience)*100,"%")},energyValue:function(){return Math.round(this.energy)}},watch:{energy:function(){s.$emit("energy-updated",this.energy)}},methods:{fetchData:function(){var t=this;s.$emit("user-update"),this.unsubscribe(),axios.get(this.url).then(function(e){t.data=e.data,t.initEnergy(),t.subscribe(),s.$emit("user-updated",t.data)})},initEnergy:function(){var t=this;this.clearEnergy(),this.energy=this.data.energy,this.data.production_rate&&(this.energyInterval=setInterval(function(){t.energy+=t.data.production_rate/3600},1e3))},clearEnergy:function(){this.energyInterval&&(this.energyInterval=clearInterval(this.energyInterval))},subscribe:function(){this.isSubscribed||(Echo.private("user.".concat(this.data.id)).listen(".updated",this.fetchData).notification(this.fetchData),this.isSubscribed=!0)},unsubscribe:function(){this.isSubscribed&&(Echo.leave("user.".concat(this.data.id)),this.isSubscribed=!1)},openUser:function(){s.$emit("profile-click",this.data.username)},openMailbox:function(){s.$emit("mailbox-click")},openSetting:function(){s.$emit("setting-click")}}},X={bind:function(t,e){var i={container:"body"};e.value&&(i=_.extend({},i,e.value)),$(t).popover(i)},unbind:function(t){$(t).popover("dispose")},update:function(t,e){e.value.title!==e.oldValue.title&&($(t).data("bs.popover").config.title=e.value.title),e.value.content!==e.oldValue.content&&($(t).data("bs.popover").config.content=e.value.content)}},Y=k.extend({props:["username","canMove","close"],computed:{dataUrl:function(){return this.url.replace("__user__",this.username)}},methods:{move:function(t){s.$emit("starmap-move",t.x,t.y),this.close()}}}),Z=c.extend({props:["url","blockUrl","canMove","translations"],components:{PlanetList:Y},mixins:[N],data:function(){return{isBlocked:!1,username:"",data:{is_blocked:!1,created_at:""}}},created:function(){s.$on("profile-click",this.open)},computed:{joined:function(){return this.translations.joined.replace("__datetime__",g(this.data.created_at))}},methods:{open:function(t){this.username=t,this.fetchData()},fetchData:function(){var t=this;axios.get(this.url.replace("__user__",this.username)).then(function(e){t.data=e.data,t.isBlocked=t.data.is_blocked,t.$nextTick(function(){return t.$modal.modal()})})},sendMessage:function(){var t=this;this.openAfterHidden(function(){return s.$emit("message-click",t.username)})},toggleBlock:function(){this.isBlocked=!this.isBlocked,axios.put(this.blockUrl.replace("__user__",this.username))}}}),W=R.extend({data:function(){return{email:""}},created:function(){var t=this;s.$on("setting-click",this.open),s.$on("user-updated",function(e){t.email=e.email})},computed:{method:function(){return"put"}},methods:{open:function(){var t=this;this.form.email=this.email,this.$nextTick(function(){return t.$modal.modal()})},values:function(){return{email:"",password:"",password_confirmation:""}}}}),K=i("t/UT"),G={props:["planetUrl","planetNameUrl","userCurrentUrl"],mixins:[N],data:function(){return{perfectScrollbar:void 0,isActive:!1,isEditActive:!1,isSubscribed:!1,selected:void 0,name:"",usedCapacity:0,resource:0,resourceInterval:void 0,data:{id:void 0,resource_id:void 0,user_id:void 0,capacity:0,supply:0,solarion:0,mining_rate:0,used_capacity:0,used_supply:0,used_training_supply:0,display_name:"",planets:[],resources:[],units:[]}}},created:function(){var t=this;this.fetchData(),s.$on("prev-planet",this.prevPlanet),s.$on("next-planet",this.nextPlanet),s.$on("change-planet",function(e){t.selected=e})},mounted:function(){this.initPerfectScrollbar()},watch:{$route:function(){this.fetchData()},selected:function(){this.changePlanet()},resource:function(){s.$emit("resource-updated",this.resource)}},computed:{isResourceFull:function(){return this.data.capacity===this.usedCapacity},isUnitFull:function(){return this.data.supply===this.data.used_supply},selectedIndex:function(){return _.findIndex(this.data.planets,{id:this.selected})},resourceLabel:function(){return"".concat(Math.round(this.usedCapacity)," / ").concat(this.data.capacity)},resourceProgress:function(){return"".concat(Math.min(100,this.usedCapacity/this.data.capacity*100),"%")},unitLabel:function(){return"".concat(this.data.used_supply+this.data.used_training_supply," / ").concat(this.data.supply)},unitProgress:function(){return"".concat(this.data.used_supply/this.data.supply*100,"%")},unitTrainingProgress:function(){return"".concat(this.data.used_training_supply/this.data.supply*100,"%")}},methods:{fetchData:function(){var t=this;s.$emit("planet-update"),this.unsubscribe(),axios.get(this.planetUrl).then(function(e){t.data=e.data,t.selected=t.data.id,t.initName(),t.initResource(),t.subscribe(),s.$emit("planet-updated",t.data)})},renamePlanet:function(){this.name===this.data.display_name?this.isEditActive=!1:this.name||this.data.name!==this.data.display_name?axios.put(this.planetNameUrl,{name:this.name}):this.initName()},prevPlanet:function(){var t=this.selectedIndex-1;t<0&&(t=this.data.planets.length-1),this.changePlanetByIndex(t)},nextPlanet:function(){var t=this.selectedIndex+1;t===this.data.planets.length&&(t=0),this.changePlanetByIndex(t)},changePlanet:function(){this.selected!==this.data.id&&axios.put(this.userCurrentUrl.replace("__planet__",this.selected))},changePlanetByIndex:function(t){_.isUndefined(this.data.planets[t])||(this.selected=_.get(this.data.planets[t],"id"))},initName:function(){this.isEditActive=!1,this.name=this.data.display_name},initResource:function(){var t=this;this.clearResource(),this.usedCapacity=this.data.used_capacity,this.resource=_.get(_.find(this.data.resources,{id:this.data.resource_id}),"quantity",0),this.data.mining_rate&&this.data.capacity!==this.usedCapacity&&(this.resourceInterval=setInterval(function(){var e=Math.min(t.data.capacity-t.usedCapacity,t.data.mining_rate/3600);t.resource+=e,t.usedCapacity+=e,t.data.capacity===t.usedCapacity&&t.clearResource()},1e3))},clearResource:function(){this.resourceInterval&&(this.resourceInterval=clearInterval(this.resourceInterval))},initPerfectScrollbar:function(){this.perfectScrollbar=new K.default(this.$refs.scrollbar)},updatePerfectScrollbar:function(){this.perfectScrollbar.update()},subscribe:function(){this.isSubscribed||(Echo.private("planet.".concat(this.data.id)).listen(".updated",this.fetchData),s.$on("user-update",this.fetchData),this.isSubscribed=!0)},unsubscribe:function(){this.isSubscribed&&(Echo.leave("planet.".concat(this.data.id)),s.$off("user-update",this.fetchData),this.isSubscribed=!1)},toggle:function(){this.isActive=!this.isActive,this.isActive&&this.updatePerfectScrollbar()},toggleEdit:function(){var t=this;this.isEditActive=!this.isEditActive,this.isEditActive&&this.$nextTick(function(){return t.$refs.name.focus()})},resourceQuantity:function(t){return t.id===this.data.resource_id?this.resource:t.quantity},resourceValue:function(t){return Math.round(this.resourceQuantity(t))},openMothership:function(){s.$emit("mothership-click")},openTrophy:function(){s.$emit("trophy-click")}}},tt=c.extend({props:["url","bookmarkStoreUrl"],data:function(){return{geoJsonPoint:{properties:{},geometry:{coordinates:[]}},data:{is_bookmarked:!1,has_expedition:!1}}},created:function(){s.$on("star-click",this.open)},computed:{properties:function(){return this.geoJsonPoint.properties},geometry:function(){return this.geoJsonPoint.geometry}},methods:{open:function(t){this.geoJsonPoint=t,this.fetchData()},fetchData:function(){var t=this;axios.get(this.url.replace("__star__",this.properties.id)).then(function(e){t.data=e.data,t.$nextTick(function(){return t.$modal.modal()})})},bookmark:function(){this.data.is_bookmarked=!0,axios.post(this.bookmarkStoreUrl.replace("__star__",this.properties.id))},showExpedition:function(){this.openAfterHidden(function(){return s.$emit("mothership-click","armory")})}}}),et={props:{size:{type:Number,required:!0},maxZoom:{type:Number,required:!0},geoJsonUrl:{type:String,required:!0},tileUrl:{type:String,required:!0},imagePath:{type:String,required:!0},zoomInTitle:{type:String,required:!0},zoomOutTitle:{type:String,required:!0},bookmarkTitle:{type:String,required:!0}},data:function(){return{geoJsonLayer:void 0,map:void 0,zoom:0,planet:{id:void 0,x:0,y:0}}},created:function(){this.zoom=Math.ceil(Math.log(this.size/256)/Math.log(2))},mounted:function(){s.$on("planet-updated",this.planetUpdated),s.$on("starmap-move",this.starmapMove)},beforeDestroy:function(){s.$off("planet-updated",this.planetUpdated),s.$off("starmap-move",this.starmapMove),this.destoryLeaflet()},methods:{planetUpdated:function(t){var e=t.id===this.planet.id;this.planet=t,this.map?e?this.geoJsonLayer.refresh():this.map.setView(this.center(),this.maxZoom):this.initLeaflet()},starmapMove:function(t,e){this.map.setView(this.unproject(t,e),this.maxZoom)},initLeaflet:function(){var t=this;L.Icon.Default.imagePath="".concat(this.imagePath,"/"),this.map=L.map(this.$el,{attributionControl:!1,boxZoom:!1,crs:L.CRS.Simple,minZoom:0,maxZoom:this.maxZoom,zoomControl:!1}),this.map.setView(this.center(),this.maxZoom),L.tileLayer(this.tileUrl,{noWrap:!0,bounds:L.latLngBounds(this.southWest(),this.northEast())}).addTo(this.map);var e=function(e){return t.map.unproject([e[0],e[1]],t.maxZoom)};this.geoJsonLayer=L.geoJson.ajax(this.geoJson(),{coordsToLatLng:e,pointToLayer:function(i,n){return i.properties.is_movement?t.movementMarker(n,e(i.properties.end),i):t.objectMarker(n,i)},style:function(e){return"LineString"===e.geometry.type?{className:"leaflet-movement ".concat(t.movementClassName(e))}:{}}}),this.geoJsonLayer.ajaxParams.headers=axios.defaults.headers.common,this.geoJsonLayer.addTo(this.map),this.map.on("zoomstart",function(){return t.geoJsonLayer.clearLayers()}),this.map.on("moveend",function(){return t.geoJsonLayer.refresh(t.geoJson())}),this.zoomControl().addTo(this.map),this.bookmarkControl().addTo(this.map)},destoryLeaflet:function(){this.map&&(this.map.remove(),this.map=void 0)},geoJson:function(){var t=this.map.getPixelBounds(),e=this.multiplier();return this.geoJsonUrl.replace("__zoom__",this.map.getZoom()).replace("__bounds__",[t.min.x*e,t.min.y*e,t.max.x*e,t.max.y*e].join(","))},center:function(){return this.unproject(this.planet.x,this.planet.y)},southWest:function(){return this.unproject(0,0)},northEast:function(){return this.unproject(this.size,this.size)},unproject:function(t,e){return this.map.unproject([t,e],this.zoom)},multiplier:function(){return Math.pow(2,this.maxZoom-this.map.getZoom())},zoomControl:function(){return L.control.zoom({zoomInTitle:this.zoomInTitle,zoomOutTitle:this.zoomOutTitle})},bookmarkControl:function(){return new(L.Control.extend({options:{position:"topleft",bookmarkTitle:this.bookmarkTitle,bookmarkIconClass:"fas fa-star"},onAdd:function(){var t=L.DomUtil.create("div","leaflet-bar leaflet-control leaflet-control-bookmark"),e=L.DomUtil.create("a","leaflet-control-bookmark",t);return e.href="#",e.title=this.options.bookmarkTitle,e.onclick=function(t){t.preventDefault(),s.$emit("bookmark-click")},L.DomUtil.create("i",this.options.bookmarkIconClass,e),t}}))},objectMarker:function(t,e){var i=(e.properties.size+16)/this.multiplier(),n={className:"planet"===e.properties.type?"leaflet-icon-object ".concat(e.properties.status):"leaflet-icon-object",iconSize:[i,i]};this.map.getZoom()>=8&&(n.html="<span>".concat(e.properties.name,"</span>"));var a=L.marker(t,{title:e.properties.name,icon:L.divIcon(n)});return a.on("click",function(){return s.$emit("".concat(e.properties.type,"-click"),e)}),a},movementMarker:function(t,e,i){L.MovementMarker=L.Marker.extend({options:{end:e,interval:i.properties.interval},onAdd:function(t){var e=this;L.Marker.prototype.onAdd.call(this,t),this._icon&&(this._icon.style[L.DomUtil.TRANSITION]="all ".concat(this.options.interval-1,"s linear")),this._shadow&&(this._shadow.style[L.DomUtil.TRANSITION]="all ".concat(this.options.interval-1,"s linear")),setTimeout(function(){return e.setLatLng(e.options.end)},1e3)}});var n=32/this.multiplier(),a={className:"leaflet-icon-movement ".concat(this.movementClassName(i)," size-").concat(n),iconSize:[n,n]};if(this.map.getZoom()>=8){var r=Math.atan2(e.lng-t.lng,e.lat-t.lat),s=360*(r>0?r:2*Math.PI+r)/(2*Math.PI)-45;a.html='<i class="fas fa-rocket" style="'.concat(L.DomUtil.TRANSFORM,": translateX(-50%) translateY(-50%) rotate(").concat(s,'deg)"></i>')}return new L.MovementMarker(t,{icon:L.divIcon(a)})},movementClassName:function(t){return"expedition"===t.properties.type?t.properties.type:t.properties.type<3?"".concat(t.properties.status,"-attack"):t.properties.status}}},it=i("KHd+"),nt=Object(it.a)(et,function(){var t=this.$createElement;return(this._self._c||t)("div",{staticClass:"starmap"})},[],!1,null,null,null).exports,at=i("kSzJ"),rt={hitArea:new at.Polygon([0,120,160,40,320,120,160,200]),plain:new at.Rectangle(0,0,320,200),resources:{1:new at.Rectangle(320,0,320,200),2:new at.Rectangle(640,0,320,200),3:new at.Rectangle(960,0,320,200),4:new at.Rectangle(1280,0,320,200),5:new at.Rectangle(1600,0,320,200),6:new at.Rectangle(0,200,320,200),7:new at.Rectangle(320,200,320,200)},buildings:{1:new at.Rectangle(640,200,320,200),2:{1:new at.Rectangle(960,200,320,200),2:new at.Rectangle(1280,200,320,200),3:new at.Rectangle(1600,200,320,200),4:new at.Rectangle(0,400,320,200),5:new at.Rectangle(320,400,320,200),6:new at.Rectangle(640,400,320,200),7:new at.Rectangle(960,400,320,200)},3:new at.Rectangle(1280,400,320,200),4:new at.Rectangle(1600,400,320,200),5:new at.Rectangle(0,600,320,200),6:new at.Rectangle(320,600,320,200),7:new at.Rectangle(640,600,320,200),8:new at.Rectangle(960,600,320,200),9:new at.Rectangle(1280,600,320,200),10:new at.Rectangle(1600,600,320,200)},constructions:{1:new at.Rectangle(0,800,320,200),2:new at.Rectangle(320,800,320,200),3:new at.Rectangle(640,800,320,200),4:new at.Rectangle(960,800,320,200),5:new at.Rectangle(1280,800,320,200),6:new at.Rectangle(1600,800,320,200),7:new at.Rectangle(0,1e3,320,200),8:new at.Rectangle(320,1e3,320,200),9:new at.Rectangle(640,1e3,320,200),10:new at.Rectangle(960,1e3,320,200)}},st={props:{width:{type:Number,required:!0},height:{type:Number,required:!0},backgroundTexture:{type:String,required:!0},gridTextureAtlas:{type:String,required:!0}},data:function(){return{$viewport:void 0,animationFrame:void 0,clickTreshold:5,isDragging:!1,dragStartX:0,dragStartY:0,dragged:0,container:void 0,intervals:[],loader:void 0,renderer:void 0,stage:void 0,planet:{resource_id:void 0,grids:[]},textStyle:{fontFamily:"Exo 2",fontSize:"14px",fill:"#fff",align:"center",stroke:"#0e141c",strokeThickness:4}}},created:function(){at.utils.skipHello()},mounted:function(){this.$viewport=$(this.$el).parent(),s.$on("planet-updated",this.planetUpdated)},beforeDestroy:function(){s.$off("planet-updated",this.planetUpdated),this.destoryPixi()},methods:{planetUpdated:function(t){this.planet=t,this.stage?this.updatePixi():this.initPixi()},initPixi:function(){var t=this;this.loader=new at.loaders.Loader,this.loader.add(this.backgroundName(),this.background()),this.loader.add("grid",this.gridTextureAtlas),this.loader.load(function(){t.setup(),t.align(),t.animate()}),this.stage=new at.Container,this.container=new at.Container,this.container.interactive=!0,this.container.on("mousedown",this.mouseDown),this.container.on("mousemove",this.mouseMove),this.container.on("mouseup",this.mouseUp),this.container.on("mouseupoutside",this.mouseUp),this.container.on("touchstart",this.mouseDown),this.container.on("touchmove",this.mouseMove),this.container.on("touchend",this.mouseUp),this.container.on("touchendoutside",this.mouseUp),this.stage.addChild(this.container),this.renderer=Object(at.autoDetectRenderer)(this.rendererWidth(),this.rendererHeight(),{view:this.$el,transparent:!0}),window.addEventListener("resize",this.resize)},updatePixi:function(){var t=this.backgroundName();this.loader.resources[t]?this.setup():(this.loader.add(t,this.background()),this.loader.load(this.setup))},destoryPixi:function(){this.stage&&(this.clearIntervals(),cancelAnimationFrame(this.animationFrame),this.renderer.destroy(),this.renderer=void 0,this.container.destroy(!0,!0,!0),this.container=void 0,this.stage.destroy(!0,!0,!0),this.stage=void 0,this.loader.destroy(),this.loader=void 0,at.utils.destroyTextureCache())},setup:function(){var t=this;this.clearIntervals(),this.container.removeChildren(),this.container.addChild(this.backgroundSprite()),_.forEach(this.planet.grids,function(e){return t.container.addChild(t.gridSprite(e))})},clearIntervals:function(){_.forEach(this.intervals,function(t){return clearInterval(t)}),this.intervals=[]},resize:function(){this.renderer.resize(this.rendererWidth(),this.rendererHeight()),this.align()},align:function(){this.container.position.x=this.centerX(),this.container.position.y=this.centerY()},animate:function(){this.animationFrame=requestAnimationFrame(this.animate);var t=this.containerX(),e=this.containerY();this.container.position.x<t&&(this.container.position.x=t),this.container.position.y<e&&(this.container.position.y=e),this.container.position.x>0&&(this.container.position.x=0),this.container.position.y>0&&(this.container.position.y=0),this.renderer.render(this.stage)},mouseDown:function(t){var e=t.data.getLocalPosition(this.container.parent);this.dragStartX=e.x-this.container.position.x,this.dragStartY=e.y-this.container.position.y,this.isDragging=!0,this.dragged=0},mouseMove:function(t){if(this.isDragging){var e=t.data.getLocalPosition(this.container.parent),i=this.container.position.x,n=this.container.position.y;this.container.position.x=e.x-this.dragStartX,this.container.position.y=e.y-this.dragStartY,this.dragged+=Math.abs(i-this.container.position.x),this.dragged+=Math.abs(n-this.container.position.y)}},mouseUp:function(){this.isDragging=!1},background:function(){return this.backgroundTexture.replace("__resource__",this.planet.resource_id)},backgroundName:function(){return"background_".concat(this.planet.resource_id)},backgroundSprite:function(){return new at.Sprite(this.loader.resources[this.backgroundName()].texture)},rendererWidth:function(){return this.$viewport.width()},rendererHeight:function(){return this.$viewport.height()},centerX:function(){return this.containerX()/2},centerY:function(){return this.containerY()/2},containerX:function(){return this.renderer.width-this.container.width},containerY:function(){return this.renderer.height-this.container.height},gridSprite:function(t){var e=this,i=new at.Sprite(this.gridTexture(t));return i.interactive=!0,i.hitArea=rt.hitArea,i.x=this.gridX(t),i.y=this.gridY(t),i.on("mouseover",function(){return e.gridOver(i)}),i.on("mouseout",function(){return e.gridOut(i)}),i.on("click",function(){return e.gridClick(t)}),i.on("tap",function(){return e.gridClick(t)}),this.gridLevel(t,i),this.gridRemaining(t,i),i},gridTexture:function(t){var e=rt.plain;return t.construction?e=rt.constructions[t.construction.building_id]:1===t.type?e=t.building_id?rt.buildings[t.building_id][this.planet.resource_id]:rt.resources[this.planet.resource_id]:t.building_id&&(e=rt.buildings[t.building_id]),new at.Texture(this.loader.resources.grid.texture,e)},gridX:function(t){return 162*(t.x-t.y+4)+(this.width-1608)/2},gridY:function(t){return 81*(t.x+t.y)+(this.height-888)/2},gridOver:function(t){t.alpha=.6},gridOut:function(t){t.alpha=1},gridClick:function(t){this.dragged>this.clickTreshold||s.$emit(t.building_id?"building-click":"grid-click",t)},gridLevel:function(t,e){if(t.level){var i=new at.Text(t.level,this.textStyle);i.position.x=(e.width-i.width)/2,i.position.y=e.height-50,e.addChild(i)}},gridRemaining:function(t,e){var i,n;if(t.construction?(i=t.construction.remaining,n=this.textStyle):t.training?(i=t.training.remaining,n=_.assignIn({},this.textStyle,{fill:"#ebb237"})):t.upgrade&&(i=t.upgrade.remaining,n=this.textStyle),i){var a=new at.Text(w(i),n);a.position.x=(e.width-a.width)/2,a.position.y=(e.height-a.height)/2,e.addChild(a);var r=setInterval(function(){i-=1,a.text=w(i),i||clearInterval(r)},1e3);this.intervals.push(r)}}}},ot=Object(it.a)(st,function(){var t=this.$createElement;return(this._self._c||t)("canvas",{staticClass:"surface"})},[],!1,null,null,null).exports,ct=k.extend({props:["openAfterHidden"],methods:{openUser:function(t){this.openAfterHidden(function(){return s.$emit("profile-click",t)})},rank:function(t){return this.data.from+t}}}),ut=c.extend({components:{Leaderboard:ct},mixins:[S],data:function(){return{selectedTab:"pve"}},created:function(){s.$on("trophy-click",this.open)},methods:{open:function(){var t=this;this.$nextTick(function(){return t.$modal.modal()})}}}),dt=o.extend({props:["type","building"],data:function(){return{isEnabled:!1}},created:function(){var t=this;s.$on("modal-show",function(){t.isEnabled=t.type===t.building.type}),s.$on("modal-hidden",function(){t.isEnabled=!1})}}),ht=dt.extend({props:["grid","url","storeUrl"],data:function(){return{isResearch:!1,mined:0,quantity:"",planet:{resource_id:void 0,resources:[]},selected:{id:void 0,efficiency:0},data:{resources:[]}}},created:function(){var t=this;s.$on("resource-updated",function(e){t.mined=e}),s.$on("planet-update",function(){return t.fetchData()}),s.$on("planet-updated",function(e){t.planet=e})},computed:{isTransmutable:function(){return this.quantity>0&&this.quantity<=this.transmutableQuantity},transmutableQuantity:function(){var t=_.find(this.planet.resources,{id:this.selected.id}),e=_.get(t,"storage",0);return this.planet.resource_id===this.selected.id?e+Math.floor(this.mined):e+_.get(t,"quantity",0)},transmutableEnergy:function(){return this.isTransmutable?this.quantity*this.selected.efficiency:0}},watch:{isEnabled:function(){this.fetchData()}},methods:{fetchData:function(){var t=this;this.isEnabled&&axios.get(this.url.replace("__grid__",this.grid.id)).then(function(e){t.data=e.data,_.find(t.data.resources,t.selected)?t.quantity="":t.select(_.first(t.data.resources))})},store:function(){axios.post(this.storeUrl.replace("__grid__",this.grid.id).replace("__resource__",this.selected.id),{quantity:this.quantity})},isSelected:function(t){return this.selected.id===t.id},select:function(t){this.selected=t,this.quantity=""}}}),lt=dt.extend({props:["grid","url"],components:{Movement:A},data:function(){return{data:{incoming_movements:[],outgoing_movements:[]}}},created:function(){var t=this;s.$on("planet-update",function(){return t.fetchData()})},computed:{isEmpty:function(){return!this.data.incoming_movements.length&&!this.data.outgoing_movements.length}},watch:{isEnabled:function(){this.fetchData()}},methods:{fetchData:function(){var t=this;this.isEnabled&&axios.get(this.url.replace("__grid__",this.grid.id)).then(function(e){t.data=e.data})}}}),pt={props:["isEnabled","building","grid","close","planet","data","storeUrl"],mixins:[B],watch:{isEnabled:function(){this.quantity={}}},computed:{travelTime:function(){return Math.round(this.data.travel_time/this.slowestSupportUnitSpeed*(1-this.building.trade_time_bonus))}},methods:{support:function(){axios.post(this.storeUrl.replace("__grid__",this.grid.id),{quantity:this.quantity}).then(this.close)}}},ft={props:["isEnabled","building","grid","close","mined","planet","data","storeUrl","unitTypes"],mixins:[F],watch:{isEnabled:function(){this.quantity={}}},computed:{travelTime:function(){return Math.round(this.data.travel_time/this.transporterUnit.speed*(1-this.building.trade_time_bonus))}},methods:{transport:function(){axios.post(this.storeUrl.replace("__grid__",this.grid.id),{quantity:this.quantity}).then(this.close)},unitQuantity:function(t){return _.get(t,"storage",0)+_.get(t,"quantity",0)}}},mt=dt.extend({props:["grid","close","url"],components:{Patrol:pt,Trade:ft},mixins:[S],data:function(){return{selectedTab:"trade",mined:0,planet:{id:void 0,resource_id:void 0,resources:[],units:[]},data:{travel_time:0}}},created:function(){var t=this;s.$on("planet-updated",function(e){t.planet=e}),s.$on("resource-updated",function(e){t.mined=e})},watch:{isEnabled:function(){this.fetchData()}},methods:{fetchData:function(){var t=this;this.isEnabled&&axios.get(this.url).then(function(e){t.data=e.data})}}}),gt=dt.extend({props:["grid","url","storeUrl","destroyUrl"],data:function(){return{isResearch:!1,energy:0,supply:0,quantity:"",selected:{id:void 0,supply:0,train_cost:0,train_time:0},data:{remaining:0,units:[]}}},created:function(){var t=this;s.$on("energy-updated",function(e){t.energy=e}),s.$on("planet-update",function(){return t.fetchData()}),s.$on("planet-updated",function(e){t.supply=e.supply-e.used_supply-e.used_training_supply})},computed:{isTrainable:function(){return this.quantity>0&&this.quantity<=this.trainableQuantity},trainableQuantity:function(){return Math.floor(Math.min(this.energy/this.selected.train_cost,this.supply/this.selected.supply))},trainName:function(){return"".concat(this.data.quantity," x ").concat(this.selected.name)},trainTime:function(){return this.isTrainable?this.quantity*this.selected.train_time:0}},watch:{isEnabled:function(){this.fetchData()}},methods:{fetchData:function(){var t=this;this.isEnabled&&axios.get(this.url.replace("__grid__",this.grid.id)).then(function(e){t.data=e.data,t.initRemaining(t.data.remaining),_.find(t.data.units,t.selected)?t.quantity="":t.select(_.first(t.data.units))})},store:function(){axios.post(this.storeUrl.replace("__grid__",this.grid.id).replace("__unit__",this.selected.id),{quantity:this.quantity})},destroy:function(){axios.delete(this.destroyUrl.replace("__grid__",this.grid.id))},isSelected:function(t){return this.selected.id===t.id},select:function(t){this.selected=t,this.quantity=""}}}),_t=c.extend({props:["centralType","url","storeUrl","destroyUrl"],components:{Producer:ht,Scout:lt,Trader:mt,Trainer:gt},data:function(){return{isCapitalPlanet:!1,energy:0,grid:{id:void 0,building_id:void 0},data:{has_training:!1,remaining:0,building:{},upgrade:{}}}},created:function(){var t=this;s.$on("building-click",this.open),s.$on("energy-updated",function(e){t.energy=e}),s.$on("planet-update",function(){return t.fetchData()}),s.$on("planet-updated",function(e){t.isCapitalPlanet=e.is_capital})},computed:{canConstruct:function(){return this.energy>=this.data.upgrade.construction_cost},canDemolish:function(){return!(this.data.has_training||this.remaining||this.isCapitalPlanet&&this.data.building.type===this.centralType)},building:function(){return this.data.building}},methods:{open:function(t){this.grid=t,this.fetchData(!0)},openDemolish:function(){var t=this;this.openAfterHidden(function(){return s.$emit("demolish-open",t.grid)})},fetchData:function(){var t=this,e=arguments.length>0&&void 0!==arguments[0]&&arguments[0];(e||this.isEnabled)&&axios.get(this.url.replace("__grid__",this.grid.id)).then(function(i){t.data=i.data,t.initRemaining(t.data.remaining),e&&t.$nextTick(function(){return t.$modal.modal()})})},store:function(){axios.post(this.storeUrl.replace("__grid__",this.grid.id))},destroy:function(){axios.delete(this.destroyUrl.replace("__grid__",this.grid.id))}}}),yt=c.extend({props:["url","storeUrl"],data:function(){return{energy:0,data:{has_solarion:!0,upgrade_count:0,upgrade_cost:0}}},created:function(){var t=this;s.$on("upgrade-all-open",this.open),s.$on("energy-updated",function(e){t.energy=e})},computed:{canStore:function(){return this.data.has_solarion&&this.data.upgrade_cost&&this.energy>=this.data.upgrade_cost}},methods:{open:function(){this.fetchData(!0)},fetchData:function(){var t=this,e=arguments.length>0&&void 0!==arguments[0]&&arguments[0];(e||this.isEnabled)&&axios.get(this.url).then(function(i){t.data=i.data,e&&t.$nextTick(function(){return t.$modal.modal()})})},store:function(){axios.post(this.storeUrl).then(this.close)}}});i("9Wh1"),Vue.filter("bracket",m),Vue.filter("fromNow",g),Vue.filter("item",y),Vue.filter("number",v),Vue.filter("percent",x),Vue.filter("sign",b),Vue.filter("timer",w),Vue.directive("popover",X),Vue.use(n.a);var vt=new n.a({mode:"history",routes:[{path:"/starmap",name:"starmap",component:nt,props:!0},{path:"/",name:"home",component:ot,props:!0}]});new Vue({router:vt,components:{Bookmark:u,Construction:d,Demolish:h,Mailbox:D,Message:E,Monitor:M,Mothership:j,Move:H,Navigation:O,Planet:V,Player:Q,Profile:Z,Setting:W,Sidebar:G,Star:tt,Trophy:ut,Upgrade:_t,UpgradeAll:yt},mixins:[N]}).$mount("#app")},pyCd:function(t,e){}},[[0,1,2]]]);